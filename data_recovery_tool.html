<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Advanced Data Recovery</title>
    <style>
        body { font-family: 'Segoe UI', sans-serif; padding: 40px; background: #f4f6f7; color: #333; }
        .box { background: white; padding: 30px; border-radius: 12px; box-shadow: 0 8px 30px rgba(0,0,0,0.1); max-width: 700px; margin: 0 auto; text-align: center; }
        h1 { color: #2c3e50; margin-top: 0; }
        .version-row { 
            display: flex; justify-content: space-between; align-items: center; 
            background: #f8f9fa; border: 1px solid #ddd; padding: 15px; 
            margin-bottom: 10px; border-radius: 8px; text-align: left; 
        }
        .version-info { flex-grow: 1; }
        .version-name { font-weight: bold; color: #2980b9; font-size: 1.1rem; }
        .version-details { font-size: 0.85rem; color: #7f8c8d; }
        .btn { 
            background: #27ae60; color: white; border: none; padding: 10px 20px; 
            border-radius: 6px; cursor: pointer; font-weight: bold; transition: all 0.2s; 
        }
        .btn:hover { transform: scale(1.05); background: #2ecc71; }
        .btn-delete { background: #c0392b; margin-left: 10px; }
        .empty-msg { color: #e74c3c; font-style: italic; margin-top: 20px; }
    </style>
</head>
<body>
    <div class="box">
        <h1>ðŸ’¾ Save Finder</h1>
        <p>I found the following saved data in this browser:</p>
        <div id="list-area">Scanning...</div>
    </div>

    <script>
        var knownKeys = [
            'eval_arch_v81_critical', 'eval_arch_v82_full', 'eval_arch_v83_full',
            'eval_arch_v84_specifics', 'eval_arch_v85_sandbox', 'eval_arch_v86_stable',
            'eval_arch_v87_revised', 'eval_arch_v88_review', 'eval_arch_v89_review',
            'eval_arch_v91_stable', 'eval_arch_v92_reset', 'eval_arch_v93_complete',
            'eval_arch_v94_complete', 'eval_arch_v95_levels', 'eval_arch_v96_modes',
            'eval_arch_v97_banks', 'eval_arch_v97_full', 'eval_arch_v99_cleaner'
        ];

        window.onload = function() {
            var container = document.getElementById('list-area');
            container.innerHTML = "";
            var foundAny = false;

            knownKeys.forEach(key => {
                var raw = localStorage.getItem(key);
                if(raw) {
                    foundAny = true;
                    try {
                        var data = JSON.parse(raw);
                        var qCount = data.content_pairs ? data.content_pairs.length : 0;
                        var topic = data.topic || "Untitled Topic";
                        
                        var div = document.createElement('div');
                        div.className = 'version-row';
                        div.innerHTML = `
                            <div class="version-info">
                                <div class="version-name">${key}</div>
                                <div class="version-details">Questions: ${qCount} | Topic: "${topic}"</div>
                            </div>
                            <button class="btn" onclick="downloadKey('${key}')">Download This</button>
                        `;
                        container.appendChild(div);
                    } catch(e) { console.log("Skipping corrupted key", key); }
                }
            });

            if(!foundAny) container.innerHTML = "<p class='empty-msg'>No saved data found in this browser.</p>";
        };

        function downloadKey(key) {
            var raw = localStorage.getItem(key);
            if(!raw) return;
            // Name the file based on the key so you know which is which
            var filename = key + ".json";
            var blob = new Blob([raw], {type: "application/json"});
            var url = URL.createObjectURL(blob);
            var a = document.createElement("a");
            a.href = url;
            a.download = filename;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
        }
    </script>
</body>
</html>
